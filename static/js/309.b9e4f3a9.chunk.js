"use strict";(self.webpackChunkimagekart=self.webpackChunkimagekart||[]).push([[309],{2309:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(4165),a=n(5861),o=n(885),c=n(2791),i=n(7022),s=n(3360),l=n(3855),m=n(9743),u={mainCont:"Movies_mainCont__-NQec",btnCont:"Movies_btnCont__UUq3X",fetchBtn:"Movies_fetchBtn__+nvuf",movieCont:"Movies_movieCont__G6Lq9",movieTitle:"Movies_movieTitle__dF1OI",movieDirector:"Movies_movieDirector__3caBv",movieText:"Movies_movieText__VQINf",loader:"Movies_loader__qTWXq",rotation:"Movies_rotation__UnNci",formCont:"Movies_formCont__sfwiN",formSubmit_btn:"Movies_formSubmit_btn__Y9MLS"},d=n(8378),f=n(184);function h(){var e=(0,c.useState)([]),t=(0,o.Z)(e,2),n=t[0],h=t[1],x=(0,c.useState)(!1),v=(0,o.Z)(x,2),p=v[0],j=v[1],Z=(0,c.useState)(null),_=(0,o.Z)(Z,2),g=_[0],b=_[1],C=(0,c.useState)(""),N=(0,o.Z)(C,2),y=N[0],k=N[1],M=(0,c.useState)(""),S=(0,o.Z)(M,2),w=S[0],T=S[1],E=(0,c.useState)(""),B=(0,o.Z)(E,2),D=B[0],I=B[1],L="https://movies-react-42dac-default-rtdb.firebaseio.com/film.json",O=(0,c.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching"),h([]),t&&b(null),e.prev=3,j(!0),e.next=7,fetch(L);case 7:if((n=e.sent).ok){e.next=10;break}throw new Error("Something Went Wrong...Retrying");case 10:return e.next=12,n.json();case 12:for(c in a=e.sent,o=[],a)o.push({id:c,title:a[c].name,director:a[c].director,movieText:a[c].opening_text});h(o),j(!1),b(null),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),b(e.t0);case 23:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);(0,c.useEffect)((function(){var e;return g&&p&&(e=setInterval((function(){O()}),5e3)),function(){return clearInterval(e)}}),[g,p,O]),(0,c.useEffect)((function(){O()}),[O]);var W=(0,f.jsx)(i.Z,{className:"d-flex align-items-center justify-content-center ".concat(u.loader),children:(0,f.jsx)("h3",{children:"No Movies Found"})});!g&&p?W=(0,f.jsx)(i.Z,{className:"d-flex align-items-center justify-content-center ".concat(u.loader),children:(0,f.jsx)("img",{src:d,alt:"loader"})}):g&&p?W=(0,f.jsxs)(i.Z,{className:"d-flex flex-column align-items-center justify-content-center ".concat(u.loader),children:[(0,f.jsx)("h3",{children:g.message}),(0,f.jsx)("img",{src:d,alt:"loader"}),(0,f.jsx)(s.Z,{className:"px-4 py-2",variant:"danger",onClick:function(){j(!1)},children:"Cancel"})]}):g&&!p&&(W=(0,f.jsx)(i.Z,{className:"d-flex flex-column align-items-center justify-content-center ".concat(u.loader),children:(0,f.jsx)("h3",{children:"Something Went Wrong..."})}));var q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:y,director:D,opening_text:w},e.next=4,fetch(L,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 4:if(!e.sent.ok){e.next=8;break}return e.next=8,O();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.parentElement.parentElement.lastElementChild.textContent,e.next=3,fetch("https://movies-react-42dac-default-rtdb.firebaseio.com/film/"+n+".json",{method:"DELETE"});case 3:if(!e.sent.ok){e.next=7;break}return e.next=7,O();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)(i.Z,{className:"".concat(u.mainCont),children:[(0,f.jsx)(i.Z,{className:"".concat(u.formCont," p-4 my-4"),children:(0,f.jsxs)(l.Z,{onSubmit:q,children:[(0,f.jsxs)(l.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,f.jsx)(l.Z.Label,{children:"Name"}),(0,f.jsx)(l.Z.Control,{type:"text",placeholder:"Enter Movie Name",value:y,onChange:function(e){k(e.target.value)}})]}),(0,f.jsxs)(l.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,f.jsx)(l.Z.Label,{children:"Opening Text"}),(0,f.jsx)(l.Z.Control,{as:"textarea",rows:3,placeholder:"Enter Opening Text Here",value:w,onChange:function(e){T(e.target.value)}})]}),(0,f.jsxs)(l.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,f.jsx)(l.Z.Label,{children:"Director Name"}),(0,f.jsx)(l.Z.Control,{type:"text",placeholder:"Enter Director Name",value:D,onChange:function(e){I(e.target.value)}})]}),(0,f.jsx)(s.Z,{variant:"primary",type:"submit",className:u.formSubmit_btn,children:"Set Movie"})]})}),(0,f.jsx)(i.Z,{className:"".concat(u.btnCont," p-4 my-4 d-flex align-items-center justify-content-center"),children:(0,f.jsx)(s.Z,{className:"".concat(u.fetchBtn),onClick:O,id:"fetchBtn",children:"Fetch Movies"})}),0===n.length&&W,n.length>0&&n.map((function(e){return(0,f.jsxs)(i.Z,{className:u.movieCont,children:[(0,f.jsx)(m.Z,{className:u.movieTitle,children:(0,f.jsx)("h2",{children:e.title})}),(0,f.jsxs)(m.Z,{className:"".concat(u.movieDirector," justify-content-between align-items-center"),children:[(0,f.jsxs)("h3",{className:"w-auto",children:["By :- ",e.director]}),(0,f.jsx)(s.Z,{variant:"danger",className:"btn-sm w-auto mx-3",onClick:F,children:"Delete"})]}),(0,f.jsx)(m.Z,{className:u.movieText,children:(0,f.jsx)("p",{children:e.movieText})}),(0,f.jsx)("p",{hidden:!0,children:e.id})]},e.id)}))]})}}}]);
//# sourceMappingURL=309.b9e4f3a9.chunk.js.map