{"version":3,"file":"static/js/309.b9e4f3a9.chunk.js","mappings":"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","sources":["webpack://imagekart/./src/Components/Pages/Movies.module.css?d0ef","Components/Pages/Movies.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"mainCont\":\"Movies_mainCont__-NQec\",\"btnCont\":\"Movies_btnCont__UUq3X\",\"fetchBtn\":\"Movies_fetchBtn__+nvuf\",\"movieCont\":\"Movies_movieCont__G6Lq9\",\"movieTitle\":\"Movies_movieTitle__dF1OI\",\"movieDirector\":\"Movies_movieDirector__3caBv\",\"movieText\":\"Movies_movieText__VQINf\",\"loader\":\"Movies_loader__qTWXq\",\"rotation\":\"Movies_rotation__UnNci\",\"formCont\":\"Movies_formCont__sfwiN\",\"formSubmit_btn\":\"Movies_formSubmit_btn__Y9MLS\"};","import React, { useEffect, useState, useCallback } from 'react'\r\nimport { Container, Button, Row, Form } from 'react-bootstrap'\r\nimport classes from \"./Movies.module.css\"\r\nimport loader from \"../../Assets/loader.png\"\r\n\r\nexport default function Movies() {\r\n    const [movies, setMovies] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // state for movie adding form\r\n    const [movieName, setMovieName] = useState(\"\");\r\n    const [movie_openingText, setMovieOpeningText] = useState(\"\");\r\n    const [movieDirector, setMovieDirector] = useState(\"\");\r\n    // ____________________________________\r\n\r\n    const api_url = \"https://movies-react-42dac-default-rtdb.firebaseio.com/film.json\";\r\n\r\n    const fetchAPI_handler = useCallback(async (e) => {\r\n        console.log(\"fetching\");\r\n        setMovies([]);\r\n        if (e) {\r\n            setError(null);\r\n        }\r\n        try {\r\n            setIsLoading(true);\r\n            let res = await fetch(api_url);\r\n            if (!res.ok) {\r\n                throw new Error(\"Something Went Wrong...Retrying\");\r\n            }\r\n            const data = await res.json();\r\n            let loadedMovies = [];\r\n            for (let key in data) {\r\n                loadedMovies.push({\r\n                    id: key,\r\n                    title: data[key].name,\r\n                    director: data[key].director,\r\n                    movieText: data[key].opening_text\r\n                })\r\n            }\r\n            setMovies(loadedMovies);\r\n            setIsLoading(false);\r\n            setError(null);\r\n        }\r\n        catch (err) {\r\n            setError(err);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        let keepFetching;\r\n        if (error && isLoading) {\r\n            keepFetching = setInterval(() => {\r\n                fetchAPI_handler();\r\n            }, 5000)\r\n        }\r\n\r\n        return () => clearInterval(keepFetching)\r\n    }, [error, isLoading, fetchAPI_handler])\r\n\r\n    useEffect(() => {\r\n        fetchAPI_handler();\r\n    }, [fetchAPI_handler])\r\n\r\n    const stopFetching = () => {\r\n        setIsLoading(false);\r\n    }\r\n\r\n    let errorAndLoader = <Container className={`d-flex align-items-center justify-content-center ${classes.loader}`}>\r\n        <h3>No Movies Found</h3>\r\n    </Container>\r\n\r\n    if (!error && isLoading) {\r\n        errorAndLoader = <Container className={`d-flex align-items-center justify-content-center ${classes.loader}`}>\r\n            <img src={loader} alt=\"loader\" />\r\n        </Container>\r\n    }\r\n    else if (error && isLoading) {\r\n        errorAndLoader = <Container className={`d-flex flex-column align-items-center justify-content-center ${classes.loader}`}>\r\n            <h3>{error.message}</h3>\r\n            <img src={loader} alt=\"loader\" />\r\n            <Button className='px-4 py-2' variant='danger' onClick={stopFetching}>Cancel</Button>\r\n        </Container>\r\n    }\r\n    else if (error && !isLoading) {\r\n        errorAndLoader = <Container className={`d-flex flex-column align-items-center justify-content-center ${classes.loader}`}>\r\n            <h3>Something Went Wrong...</h3>\r\n        </Container>\r\n    }\r\n\r\n    // manually adding and deleting movie \r\n    const movieName_handler = (e) => {\r\n        setMovieName(e.target.value);\r\n    }\r\n\r\n    const movie_openingText_handler = (e) => {\r\n        setMovieOpeningText(e.target.value);\r\n    }\r\n\r\n    const movieDirector_handler = (e) => {\r\n        setMovieDirector(e.target.value);\r\n    }\r\n\r\n    const movieSubmit_handler = async (e) => {\r\n        e.preventDefault();\r\n        let newMovieObj = {\r\n            name: movieName,\r\n            director: movieDirector,\r\n            opening_text: movie_openingText\r\n        }\r\n        let res = await fetch(api_url, {\r\n            method: 'POST',\r\n            body: JSON.stringify(newMovieObj),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        if (res.ok) {\r\n            await fetchAPI_handler();\r\n            // alert(\"Movie Added Successfully\");\r\n        }\r\n    }\r\n\r\n    const deleteMovie_handler = async (e) => {\r\n        const movie_id = e.target.parentElement.parentElement.lastElementChild.textContent;\r\n        let res = await fetch(\"https://movies-react-42dac-default-rtdb.firebaseio.com/film/\" + movie_id + \".json\", {\r\n            method: \"DELETE\"\r\n        })\r\n        if (res.ok) {\r\n            await fetchAPI_handler();\r\n            // alert(\"Deleted Successfully\");\r\n        }\r\n    }\r\n    // _____________________________________\r\n\r\n    return (\r\n        <Container className={`${classes.mainCont}`}>\r\n            <Container className={`${classes.formCont} p-4 my-4`}>\r\n                <Form onSubmit={movieSubmit_handler}>\r\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter Movie Name\" value={movieName} onChange={movieName_handler} />\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\r\n                        <Form.Label>Opening Text</Form.Label>\r\n                        <Form.Control as=\"textarea\" rows={3} placeholder=\"Enter Opening Text Here\" value={movie_openingText} onChange={movie_openingText_handler} />\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                        <Form.Label>Director Name</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter Director Name\" value={movieDirector} onChange={movieDirector_handler} />\r\n                    </Form.Group>\r\n                    <Button variant=\"primary\" type=\"submit\" className={classes.formSubmit_btn}>\r\n                        Set Movie\r\n                    </Button>\r\n                </Form>\r\n            </Container>\r\n\r\n            <Container className={`${classes.btnCont} p-4 my-4 d-flex align-items-center justify-content-center`}>\r\n                <Button className={`${classes.fetchBtn}`} onClick={fetchAPI_handler} id=\"fetchBtn\">Fetch Movies</Button>\r\n            </Container>\r\n\r\n            {movies.length === 0 && errorAndLoader}\r\n            {movies.length > 0 && movies.map((movie) => {\r\n                return <Container key={movie.id} className={classes.movieCont}>\r\n                    <Row className={classes.movieTitle}>\r\n                        <h2>{movie.title}</h2>\r\n                    </Row>\r\n                    <Row className={`${classes.movieDirector} justify-content-between align-items-center`}>\r\n                        <h3 className='w-auto'>By :- {movie.director}</h3>\r\n                        <Button variant='danger' className='btn-sm w-auto mx-3' onClick={deleteMovie_handler}>Delete</Button>\r\n                    </Row>\r\n                    <Row className={classes.movieText}>\r\n                        <p>{movie.movieText}</p>\r\n                    </Row>\r\n                    <p hidden>{movie.id}</p>\r\n                </Container>\r\n            })}\r\n        </Container>\r\n    )\r\n}\r\n"],"names":["Movies","_useState","useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","error","setError","_useState7","_useState8","movieName","setMovieName","_useState9","_useState10","movie_openingText","setMovieOpeningText","_useState11","_useState12","movieDirector","setMovieDirector","api_url","fetchAPI_handler","useCallback","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","res","data","loadedMovies","key","wrap","_context","prev","next","console","log","fetch","sent","ok","Error","json","push","id","title","name","director","movieText","opening_text","t0","stop","_x","apply","arguments","useEffect","keepFetching","setInterval","clearInterval","errorAndLoader","_jsx","Container","className","concat","classes","children","src","loader","alt","_jsxs","message","Button","variant","onClick","movieSubmit_handler","_ref2","_callee2","newMovieObj","_context2","preventDefault","method","body","JSON","stringify","headers","_x2","deleteMovie_handler","_ref3","_callee3","movie_id","_context3","target","parentElement","lastElementChild","textContent","_x3","Form","onSubmit","controlId","type","placeholder","value","onChange","as","rows","length","map","movie","Row","hidden"],"sourceRoot":""}